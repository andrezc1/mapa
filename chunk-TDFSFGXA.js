import{A as V,B as Z,C as j,D as B,J as A,K as E,a as b,b as L,c as l,d as S,e as f,f as u,g as s,h as z,i as g,j as a,k as c,l as m,m as w,n as h,o as F,p as v,q as y,r as C,s as P,t as p,u as I,v as Q,w as N,x as R,y as k,z as O}from"./chunk-P4SMUEFI.js";var _=b(E());var q=(()=>{let e=class e{ngOnInit(){var o=new _.default.Map({container:"mapa",style:"mapbox://styles/mapbox/streets-v11",center:[-74.36193816626428,4.344044343386635],zoom:14});o.addControl(new _.default.FullscreenControl),o.addControl(new _.default.NavigationControl({showCompass:!1}));let t=new _.default.ScaleControl({maxWidth:80,unit:"imperial"});o.addControl(t,"bottom-right"),t.setUnit("metric")}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l({type:e,selectors:[["app-full-screen"]],decls:1,vars:0,consts:[["id","mapa"]],template:function(t,r){t&1&&m(0,"div",0)},styles:["#mapa[_ngcontent-%COMP%]{height:100%;width:100%}scale[_ngcontent-%COMP%]{position:relative}"]});let i=e;return i})();var $=b(E());var Y=["mapa"],H=(()=>{let e=class e{constructor(){this.zoomLevel=14,this.center=[-74.38685825157208,4.3306767424993575]}ngOnDestroy(){this.mapa.off("zoom",()=>{}),this.mapa.off("zoomend",()=>{}),this.mapa.off("move",()=>{})}ngAfterViewInit(){this.mapa=new $.default.Map({container:this.divMapa.nativeElement,style:"mapbox://styles/mapbox/streets-v11",center:this.center,zoom:this.zoomLevel}),this.mapa.on("zoom",o=>{this.zoomLevel=this.mapa.getZoom()}),this.mapa.on("zoomend",o=>{this.mapa.getZoom()>17&&this.mapa.zoomTo(17)}),this.mapa.on("move",o=>{let t=o.target,{lng:r,lat:n}=t.getCenter();this.center=[r,n]})}zoomOut(){this.mapa.zoomOut()}zoomIn(){this.mapa.zoomIn()}zoomCambio(o){this.mapa.zoomTo(Number(o))}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l({type:e,selectors:[["app-zoom-range"]],viewQuery:function(t,r){if(t&1&&v(Y,5),t&2){let n;y(n=C())&&(r.divMapa=n.first)}},decls:16,vars:13,consts:[["mapa",""],["zoomInput",""],[1,"mapa-container"],[1,"row"],[1,"col-12"],["for","",1,"form-label"],["type","range","min","0","max","17",1,"form-range",3,"input","value"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-primary","float-end",3,"click"]],template:function(t,r){if(t&1){let n=w();m(0,"div",2,0),a(2,"div",3)(3,"div",4)(4,"label",5),p(5),k(6,"number"),k(7,"number"),k(8,"number"),c(),a(9,"input",6,1),h("input",function(){f(n);let X=P(10);return u(r.zoomCambio(X.value))}),c()(),a(11,"div",4)(12,"button",7),h("click",function(){return f(n),u(r.zoomOut())}),p(13," - "),c(),a(14,"button",8),h("click",function(){return f(n),u(r.zoomIn())}),p(15," + "),c()()()}t&2&&(s(5),N(" Zoom:",O(6,4,r.zoomLevel,"2.0-2")," -Lng,Lat: [",O(7,7,r.center[0],"2.4-4"),",",O(8,10,r.center[1],"2.4-4"),"] "),s(4),g("value",r.zoomLevel))},dependencies:[j],styles:[".mapa-container[_ngcontent-%COMP%]{height:100%;width:100%}.row[_ngcontent-%COMP%]{background-color:#fff;border-radius:5px;bottom:50px;left:50px;padding:10px;position:fixed;z-index:999;width:400px}"]});let i=e;return i})();var T=b(E());var ee=["mapa"],te=i=>({backgroundColor:i});function oe(i,e){if(i&1){let d=w();a(0,"li",5),h("click",function(){let t=f(d).$implicit,r=F();return u(r.irMarcador(t.marker))})("dblclick",function(){let t=f(d).index,r=F();return u(r.borrarMarcador(t))}),p(1),c()}if(i&2){let d=e.$implicit,o=e.index;g("ngStyle",R(2,te,d.color)),s(),Q(" Marker ",o+1," ")}}var K=(()=>{let e=class e{constructor(){this.zoomLevel=14,this.center=[-74.38685825157208,4.3306767424993575],this.marcadores=[]}ngAfterViewInit(){this.mapa=new T.default.Map({container:this.divMapa.nativeElement,style:"mapbox://styles/mapbox/streets-v11",center:this.center,zoom:this.zoomLevel}),this.leerLocalStorage()}agregarMarcador(){let o="#xxxxxx".replace(/x/g,r=>(Math.random()*16|0).toString(16)),t=new T.default.Marker({draggable:!0,color:o}).setLngLat(this.center).addTo(this.mapa);this.marcadores.push({color:o,marker:t}),this.guardarMarcadoresLocalStorage(),t.on("dragend",()=>{this.guardarMarcadoresLocalStorage()})}irMarcador(o){this.mapa.flyTo({center:o.getLngLat()})}guardarMarcadoresLocalStorage(){let o=[];this.marcadores.forEach(t=>{let r=t.color,{lng:n,lat:x}=t.marker.getLngLat();o.push({color:r,centro:[n,x]})}),localStorage.setItem("marcadores",JSON.stringify(o))}leerLocalStorage(){if(!localStorage.getItem("marcadores"))return;JSON.parse(localStorage.getItem("marcadores")).forEach(t=>{let r=new T.default.Marker({color:t.color,draggable:!0}).setLngLat(t.centro).addTo(this.mapa);this.marcadores.push({marker:r,color:t.color}),r.on("dragend",()=>{this.guardarMarcadoresLocalStorage()})})}borrarMarcador(o){this.marcadores[o].marker?.remove(),this.marcadores.splice(o,1),this.guardarMarcadoresLocalStorage()}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l({type:e,selectors:[["app-marcadores"]],viewQuery:function(t,r){if(t&1&&v(ee,5),t&2){let n;y(n=C())&&(r.divMapa=n.first)}},decls:6,vars:1,consts:[["mapa",""],[1,"list-group"],[1,"list-group-item","list-group-item-info",3,"click"],["class","list-group-item ",3,"ngStyle","click","dblclick",4,"ngFor","ngForOf"],[1,"mapa-container"],[1,"list-group-item",3,"click","dblclick","ngStyle"]],template:function(t,r){if(t&1){let n=w();a(0,"ul",1)(1,"li",2),h("click",function(){return f(n),u(r.agregarMarcador())}),p(2," +Agregar "),c(),z(3,oe,2,4,"li",3),c(),m(4,"div",4,0)}t&2&&(s(3),g("ngForOf",r.marcadores))},dependencies:[V,Z],styles:[".mapa-container[_ngcontent-%COMP%]{height:100%;width:100%}.list-group[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:99}li[_ngcontent-%COMP%]{cursor:pointer}"]});let i=e;return i})();var D=b(E());var ie=["mapa"],U=(()=>{let e=class e{constructor(){this.lngLat=[0,0]}ngAfterViewInit(){let o=new D.default.Map({container:this.divMapa.nativeElement,style:"mapbox://styles/mapbox/streets-v11",center:this.lngLat,zoom:15,interactive:!1});new D.default.Marker().setLngLat(this.lngLat).addTo(o)}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l({type:e,selectors:[["app-mini-mapa"]],viewQuery:function(t,r){if(t&1&&v(ie,5),t&2){let n;y(n=C())&&(r.divMapa=n.first)}},inputs:{lngLat:"lngLat"},decls:2,vars:0,consts:[["mapa",""]],template:function(t,r){t&1&&m(0,"div",null,0)},styles:["div[_ngcontent-%COMP%]{width:100%;height:150px;margin:0}"]});let i=e;return i})();function ne(i,e){if(i&1&&(a(0,"div",6)(1,"div",7),m(2,"app-mini-mapa",8),a(3,"div",9)(4,"h5",10),p(5),c(),a(6,"p",11),p(7),c()()()()),i&2){let d=e.$implicit;s(2),g("lngLat",d.lngLat),s(3),I(d.titulo),s(2),I(d.descripcion)}}var W=(()=>{let e=class e{constructor(){this.propiedades=[{titulo:"Casa residencial, Canad\xE1",descripcion:"Bella propiedad en Katana, Canad\xE1",lngLat:[-75.92722289474008,45.280015511264466]},{titulo:"Casa de playa, M\xE9xico",descripcion:"Hermosa casa de playa en Acapulco, M\xE9xico",lngLat:[-99.91287720907991,16.828940930185748]},{titulo:"Apartamento, Argentina",descripcion:"Lujoso apartamento en el coraz\xF3n de Buenos Aires, Argentina",lngLat:[-58.430166677283445,-34.57150108832866]},{titulo:"Local comercial, Espa\xF1a",descripcion:"Local comercial disponible en Madrid, Espa\xF1a, cerca de El Jard\xEDn Secreto.",lngLat:[-3.7112735618380177,40.42567285425766]}]}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l({type:e,selectors:[["app-propiedades"]],decls:11,vars:1,consts:[[1,"row","mt-3"],[1,"col-2"],[1,"col"],[1,"row","container"],[1,"row"],["class","col-4 mb-2",4,"ngFor","ngForOf"],[1,"col-4","mb-2"],[1,"card"],[1,"card-img-top",3,"lngLat"],[1,"card-body"],[1,"card-title"],[1,"card-text"]],template:function(t,r){t&1&&(a(0,"div",0),m(1,"div",1),a(2,"div",2)(3,"h1"),p(4,"Lista de propiedades"),c(),m(5,"hr"),c()(),a(6,"div",3),m(7,"div",1),a(8,"div",2)(9,"div",4),z(10,ne,8,3,"div",5),c()()()),t&2&&(s(10),g("ngForOf",r.propiedades))},dependencies:[V,U]});let i=e;return i})();var ae=[{path:"",children:[{path:"fullscreen",component:q},{path:"zoom-range",component:H},{path:"marcadores",component:K},{path:"propiedades",component:W},{path:"**",redirectTo:"fullscreen"}]}],G=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=S({type:e}),e.\u0275inj=L({imports:[A.forChild(ae),A]});let i=e;return i})();var Oe=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=S({type:e}),e.\u0275inj=L({imports:[B,G]});let i=e;return i})();export{Oe as MapasModule};
